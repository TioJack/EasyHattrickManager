<app-alert #alert></app-alert>
<header class="d-flex justify-content-between align-items-center bg-light p-1 border-bottom header-fixed">
  <div>
    <div class="dropdown">
      <button class="btn btn-outline-primary dropdown-toggle" type="button" id="teamDropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
        {{ 'ehm.project' | translate | firstCapitalize }}: {{ selectedProject?.name }}
      </button>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="teamDropdownMenuButton">
        <li *ngFor="let project of dataResponse.userConfig.projects">
          <button class="dropdown-item" (click)="selectProject(project)">
            {{ project.name }}
          </button>
        </li>
      </ul>
    </div>
  </div>

  <div class="d-flex align-items-center">
    <button class="btn btn-outline-secondary" (click)="playService.onFirstWeek()" title="{{ 'ehm.start' | translate }}">
      <i class="bi bi-chevron-bar-left"></i>
    </button>
    <button class="btn btn-outline-secondary" (click)="playService.onPreviousSeason()" title="-1 {{ 'ehm.season' | translate }}">
      <i class="bi bi-chevron-double-left"></i>
    </button>
    <button class="btn btn-outline-secondary" (click)="playService.onPreviousWeek()" title="-1 {{ 'ehm.week' | translate }}">
      <i class="bi bi-chevron-left"></i>
    </button>
    <span class="fw-bold mx-3">
      {{ 'ehm.season' | translate }} {{ (playService.selectedSeason$ | async) }}
      {{ 'ehm.week' | translate }} {{ (playService.selectedWeek$ | async) }}
    </span>
    <button class="btn btn-outline-secondary" (click)="playService.onNextWeek()" title="+1 {{ 'ehm.week' | translate }}">
      <i class="bi bi-chevron-right"></i>
    </button>
    <button class="btn btn-outline-secondary" (click)="playService.onNextSeason()" title="+1 {{ 'ehm.season' | translate }}">
      <i class="bi bi-chevron-double-right"></i>
    </button>
    <button class="btn btn-outline-secondary" (click)="playService.onLastWeek()" title="{{ 'ehm.end' | translate }}">
      <i class="bi bi-chevron-bar-right"></i>
    </button>
    <i class="bi bi-info-circle ms-2 fs-6" title="{{ 'ehm.navigate-help' | translate }}"></i>
  </div>

  <div class="d-inline-flex gap-2">
    <div class="dropdown">
      <button class="btn btn-primary" type="button" id="dropdownFilterButton" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-filter"></i>
      </button>
      <div class="dropdown-menu dropdown-menu-end dropdown-menu-auto p-3" aria-labelledby="dropdownFilterButton">
        <app-player-filter [players]="getFilteredPlayers()"></app-player-filter>
      </div>
    </div>

    <div class="dropdown">
      <button class="btn btn-primary" type="button" id="dropdownSortButton" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-sort-down"></i>
      </button>
      <div class="dropdown-menu dropdown-menu-end dropdown-menu-auto p-3" aria-labelledby="dropdownSortButton">
        <app-player-sort></app-player-sort>
      </div>
    </div>

    <div class="dropdown">
      <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-list"></i>
      </button>
      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-auto img-cert" aria-labelledby="dropdownMenuButton">
        <li>
          <a class="dropdown-item" target="_blank" href="http://hattrick.org/goto.ashx?path=/Club/Manager/?userId={{ dataResponse.user.id }}">
            <i class="bi bi-file-earmark-person me-2"></i>{{ dataResponse.user.name }}
          </a>
        </li>
        <li>
          <button class="dropdown-item">
            <i class="bi bi-translate me-2"></i>
            <app-language [languages]="dataResponse.languages"></app-language>
          </button>
        </li>
        <li>
          <button class="dropdown-item">
            <i class="bi bi-currency-exchange me-2"></i>
            <app-currency [currencies]="dataResponse.currencies"></app-currency>
          </button>
        </li>
        <li>
          <button class="dropdown-item">
            <i class="bi bi-list-task me-2"></i>
            <a routerLink="/projects" class="nav-link">{{ 'ehm.manage-projects' | translate }}</a>
          </button>
        </li>
        <li>
          <button class="dropdown-item" (click)="update()">
            <i class="bi bi-upload me-2"></i>{{ 'ehm.update-data' | translate }}
          </button>
        </li>
        <li>
          <button class="dropdown-item" (click)="downloadData()">
            <i class="bi bi-download me-2"></i>{{ 'ehm.download-data' | translate }}
          </button>
        </li>
        <li>
          <button class="dropdown-item" (click)="logout()">
            <i class="bi bi-power me-2"></i>{{ 'ehm.log-out' | translate }}
          </button>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>
        <li>
          <a class="dropdown-item" target="_blank" routerLink="/manual">
            <i class="bi bi-book me-2"></i>Manual
          </a>
        </li>
        <li>
          <a class="dropdown-item" target="_blank" href="https://github.com/TioJack/EasyHattrickManager">
            <i class="bi bi-code-slash me-2"></i>Easy Hattrick Manager v{{ dataResponse.version }}
          </a>
        </li>
        <li>
          <a class="dropdown-item" target="_blank" href="http://hattrick.org/goto.ashx?path=/Club/Manager/?userId=4495104">
            <i class="bi bi-pen me-2"></i>TioJack
          </a>
        </li>
      </ul>
    </div>
  </div>
</header>
